<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:MyDictionary.Mobile.ViewModels"
             x:Class="MyDictionary.Mobile.Views.SettingsPage"
             x:DataType="vm:SettingsViewModel"
             Title="{Binding Title}"
             BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceLight}, Dark={StaticResource BackgroundDark}}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- Appearance -->
            <Label Text="Appearance" Style="{StaticResource SectionTitle}"/>

            <Frame Style="{StaticResource CardFrame}">
                <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                    <Label Grid.Column="0" 
                           Text="ðŸŒ™" 
                           FontSize="24"
                           VerticalOptions="Center"/>
                    <Label Grid.Column="1" 
                           Text="Dark Mode" 
                           Style="{StaticResource BodyText}"
                           VerticalOptions="Center"/>
                    <Switch Grid.Column="2" 
                            IsToggled="{Binding IsDarkMode}"
                            OnColor="{StaticResource Primary}"
                            VerticalOptions="Center"/>
                </Grid>
            </Frame>

            <!-- Language Settings -->
            <Label Text="Language Settings" Style="{StaticResource SectionTitle}" Margin="0,10,0,0"/>

            <Frame Style="{StaticResource CardFrame}">
                <VerticalStackLayout Spacing="15">
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Default Source Language" 
                               Style="{StaticResource BodyText}"
                               FontAttributes="Bold"/>
                        <Picker SelectedItem="{Binding DefaultSourceLanguage}"
                                ItemsSource="{Binding AvailableLanguages}"
                                FontSize="16"/>
                    </VerticalStackLayout>

                    <BoxView HeightRequest="1" 
                             Color="{AppThemeBinding Light={StaticResource BorderLight}, Dark={StaticResource BorderDark}}"/>

                    <VerticalStackLayout Spacing="5">
                        <Label Text="Default Target Language" 
                               Style="{StaticResource BodyText}"
                               FontAttributes="Bold"/>
                        <Picker SelectedItem="{Binding DefaultTargetLanguage}"
                                ItemsSource="{Binding AvailableLanguages}"
                                FontSize="16"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Study Settings -->
            <Label Text="Study Settings" Style="{StaticResource SectionTitle}" Margin="0,10,0,0"/>

            <Frame Style="{StaticResource CardFrame}">
                <VerticalStackLayout Spacing="15">
                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="15">
                        <Label Grid.Column="0" 
                               Text="Daily Goal (words)" 
                               Style="{StaticResource BodyText}"
                               VerticalOptions="Center"/>
                        <Stepper Grid.Column="1" 
                                 Value="{Binding DailyGoal}"
                                 Minimum="5"
                                 Maximum="100"
                                 Increment="5"
                                 VerticalOptions="Center"/>
                    </Grid>
                    <Label Text="{Binding DailyGoal, StringFormat='{0} words per day'}" 
                           Style="{StaticResource CaptionText}"
                           HorizontalOptions="End"/>
                </VerticalStackLayout>
            </Frame>

            <!-- About -->
            <Label Text="About" Style="{StaticResource SectionTitle}" Margin="0,10,0,0"/>

            <Frame Style="{StaticResource CardFrame}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="MyDictionary" 
                           Style="{StaticResource SectionTitle}"/>
                    <Label Text="Version 1.0.0" 
                           Style="{StaticResource CaptionText}"/>
                    <Label Text="A smart vocabulary learning app with spaced repetition" 
                           Style="{StaticResource BodyText}"
                           LineBreakMode="WordWrap"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Actions -->
            <Button Text="ðŸ—‘ï¸ Clear All Data"
                    Command="{Binding ClearDataCommand}"
                    Style="{StaticResource DangerButton}"
                    Margin="0,10,0,0"/>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
